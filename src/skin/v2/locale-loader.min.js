/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => {
    // webpackBootstrap
    /******/ var __webpack_modules__ = {
        /***/ "./webpack/locale-loader.js":
            /*!**********************************!*\
  !*** ./webpack/locale-loader.js ***!
  \**********************************/
            /***/ () => {
                eval(
                    "{/**\n * Dynamic Locale Loader\n * Loads locale files on-demand for moment, FullCalendar, Bootstrap DatePicker, and Select2\n */\n\nwindow.CRM = window.CRM || {};\n\n/**\n * Dynamically load a script file\n * @param {string} url - The URL of the script to load\n * @returns {Promise<void>}\n */\nfunction loadScript(url) {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = url;\n        script.onload = () => resolve();\n        script.onerror = () => reject(new Error(`Failed to load script: ${url}`));\n        document.head.appendChild(script);\n    });\n}\n\n/**\n * Load all locale files for the specified locale\n * @param {object} localeConfig - Locale configuration from locales.json\n */\nasync function loadLocaleFiles(localeConfig) {\n    // Validate localeConfig exists\n    if (!localeConfig) {\n        console.warn('localeConfig is null or undefined, skipping locale loading');\n        window.CRM.i18keys = {};\n        window.CRM.localesLoaded = true;\n        window.dispatchEvent(new Event('CRM.localesReady'));\n        return;\n    }\n\n    const rootPath = window.CRM.root || '';\n    const promises = [];\n\n    try {\n        // Load i18n translation keys from JSON\n        // Skip loading for en_US as it's the base language (no translation file needed)\n        if (localeConfig.locale && localeConfig.locale !== 'en_US') {\n            const i18nPath = `${rootPath}/locale/i18n/${localeConfig.locale}.json`;\n            try {\n                const response = await fetch(i18nPath);\n                if (response.ok) {\n                    window.CRM.i18keys = await response.json();\n                } else {\n                    console.warn(`i18n keys not found for locale: ${localeConfig.locale}, using empty object`);\n                    window.CRM.i18keys = {};\n                }\n            } catch (e) {\n                console.warn(`Failed to load i18n keys for ${localeConfig.locale}:`, e);\n                window.CRM.i18keys = {};\n            }\n        } else {\n            // en_US uses empty object (base language, no translations needed)\n            window.CRM.i18keys = {};\n        }\n\n        // Load Moment.js locale if configured\n        // Skip for 'en' as it's the default locale built into moment.js\n        if (localeConfig.momentLocale && localeConfig.momentLocale !== 'en' && typeof moment !== 'undefined') {\n            const momentPath = `${rootPath}/locale/vendor/moment/${localeConfig.momentLocale}.js`;\n            promises.push(\n                loadScript(momentPath)\n                    .then(() => {\n                        if (typeof moment !== 'undefined' && typeof moment.locale === 'function') {\n                            moment.locale(localeConfig.momentLocale);\n                            console.log(`Loaded moment locale: ${localeConfig.momentLocale}`);\n                        }\n                    })\n                    .catch(e => console.warn(`Failed to load moment locale ${localeConfig.momentLocale}:`, e))\n            );\n        } else if (localeConfig.momentLocale === 'en' && typeof moment !== 'undefined') {\n            // Set to 'en' without loading (built-in default)\n            moment.locale('en');\n            console.log(`Using built-in moment locale: en`);\n        }\n\n        // Load Bootstrap DatePicker locale if configured\n        if (localeConfig.datePicker) {\n            const dpPath = `${rootPath}/locale/vendor/bootstrap-datepicker/bootstrap-datepicker.${localeConfig.languageCode}.min.js`;\n            promises.push(\n                loadScript(dpPath)\n                    .then(() => console.log(`Loaded DatePicker locale: ${localeConfig.languageCode}`))\n                    .catch(e => console.warn(`Failed to load DatePicker locale ${localeConfig.languageCode}:`, e))\n            );\n        }\n\n        // Load Select2 i18n if configured\n        if (localeConfig.select2) {\n            const s2Path = `${rootPath}/locale/vendor/select2/${localeConfig.languageCode}.js`;\n            promises.push(\n                loadScript(s2Path)\n                    .then(() => console.log(`Loaded Select2 locale: ${localeConfig.languageCode}`))\n                    .catch(e => console.warn(`Failed to load Select2 locale ${localeConfig.languageCode}:`, e))\n            );\n        }\n\n        // Load FullCalendar locale if configured\n        if (localeConfig.fullCalendar) {\n            let fcLocale = localeConfig.languageCode.toLowerCase();\n            if (localeConfig.fullCalendarLocale) {\n                fcLocale = localeConfig.fullCalendarLocale;\n            }\n            const fcPath = `${rootPath}/locale/vendor/fullcalendar/${fcLocale}.js`;\n            promises.push(\n                loadScript(fcPath)\n                    .then(() => console.log(`Loaded FullCalendar locale: ${fcLocale}`))\n                    .catch(e => console.warn(`Failed to load FullCalendar locale ${fcLocale}:`, e))\n            );\n        }\n\n        // Wait for all locale files to load\n        await Promise.all(promises);\n        console.log(`All locale files loaded for: ${localeConfig.locale}`);\n        \n        // Initialize i18next after locale keys are loaded\n        if (typeof i18next !== 'undefined' && window.CRM.i18keys) {\n            const i18nextOpt = {\n                lng: window.CRM.shortLocale,\n                nsSeparator: false,\n                keySeparator: false,\n                pluralSeparator: false,\n                contextSeparator: false,\n                fallbackLng: false,\n                resources: {}\n            };\n            i18nextOpt.resources[window.CRM.shortLocale] = {\n                translation: window.CRM.i18keys\n            };\n            i18next.init(i18nextOpt);\n            console.log('i18next initialized with locale keys');\n            \n            // Dispatch event to signal that locales are ready\n            window.dispatchEvent(new Event('CRM.localesReady'));\n            window.CRM.localesLoaded = true;\n        }\n    } catch (error) {\n        console.error('Error loading locale files:', error);\n        // Even on error, mark as loaded to prevent infinite waiting\n        window.CRM.localesLoaded = true;\n        window.dispatchEvent(new Event('CRM.localesReady'));\n    }\n}\n\n// Export for use in other scripts\nwindow.CRM.loadLocaleFiles = loadLocaleFiles;\n\n\n//# sourceURL=webpack://churchcrm/./webpack/locale-loader.js?\n}",
                );

                /***/
            },

        /******/
    };
    /************************************************************************/
    /******/
    /******/ // startup
    /******/ // Load entry module and return exports
    /******/ // This entry module can't be inlined because the eval devtool is used.
    /******/ var __webpack_exports__ = {};
    /******/ __webpack_modules__["./webpack/locale-loader.js"]();
    /******/
    /******/
})();
